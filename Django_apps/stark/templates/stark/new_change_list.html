{% extends 'layout.html' %}
{% load static %}
{% load my_tags %}
{% block css %}

    <style>
        .comb-search {
            padding: 5px 20px;
        }

        .comb-search .row .whole {
            width: 80px;
            float: left;
        }

        .comb-search .row .others {
            padding-left: 60px;
        }

        .comb-search .row a {
            display: inline-block;
            padding: 5px 8px;
            margin: 3px;
            border: 1px solid #d4d4d4;

        }

        .comb-search .row a {
            display: inline-block;
            padding: 5px 8px;
            margin: 3px;
            border: 1px solid #d4d4d4;
        }

        .comb-search a.active {
            color: #fff;
            background-color: #337ab7;
            border-color: #2e6da4;
        }

        td, th {
            text-align: center;
            height: 30px;

        }

        {#学校列表相关css#}
        .grey span {
            color: gray;
        }

        .op_father {
            position: relative;

        }

        .op_father:hover .op_list {

            width: 60px;
            display: block;
            z-index: 10;
        }

        .op_list {

            position: absolute;
            left: 13px;
            display: none;
            border: 1px solid rgba(0, 0, 0, .15);
            -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
            box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
            background-color: #fff;
        }

        .op_list a {
            display: inline-block;
            cursor: pointer;
            text-decoration: none;
            color: #000000;

        }

        #location {
            width: 110px;
            font-weight: 400;
            font-style: normal;
            font-size: 14px;
            color: #666666;
            text-align: left;
        }
    </style>
{% endblock %}

{% block content %}

    <div class="">
        <div style="overflow: hidden">
            {% if extra.table_type == "form_detail" %}
                <div>
                    <div class="layui-card">
                        <div class="layui-card-header"><h3>统计信息</h3></div>
                        <div class="layui-card-body">
                            <span style="margin: 30px">表单名称：{{ extra.title }}</span>
                            <span style="margin: 30px">关联学校：{% for school in extra.school_list  %}
                                {{ school }}&nbsp;
                            {% endfor %}
                            </span>
                            <span style="margin: 30px">剩余时间：{{ extra.time_remaining }}</span>
                        </div>
                        <div class="layui-card-body">
                            <span style="margin: 30px">表单名称:XXX表</span>
                            <span style="margin: 30px">覆盖学校:发送到，水电费，水电费，舒服点</span>
                            <span style="margin: 30px">剩余时间:10天</span>
                        </div>
                    </div>
                </div>
            {% endif %}

            {% if cl.search_list %}
                <div style="float: left">
                    <form method="get" class="layui-form x-so" style="width: 253px" action="">
                        <input type="text" name="q" placeholder="请输入学校名称" autocomplete="off" class="layui-input"
                               value="{{ cl.keyword }}" style="width: 200px">
                        <button class="layui-btn layui-btn-sm" lay-submit="" lay-filter="sreach"><i
                                class="layui-icon"></i>
                        </button>
                    </form>
                </div>
            {% endif %}
            {% if cl.add_btn %}
                <div style="float: left">
                    {{ cl.add_btn }}
                </div>
            {% endif %}
        </div>

        {% if cl.list_filter %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-filter" aria-hidden="true"></i> 快速筛选
                </div>
                <div class="panel-body">
                    <div class="comb-search">
                        {% for row in cl.gen_list_filter_row %}
                            <div class="row">
                                {% for obj in row %}
                                    {{ obj|safe }}
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <form method="get" class="layui-form x-so">

                    <div class="layui-form-item" id="x-city">
                        <label class="layui-form-label " id="location" style="">学校所在地</label>
                        <div class="layui-input-inline">
                            <select name="province" lay-filter="province" id="province">
                                <option value="">请选择省</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="city" lay-filter="city" id="city">
                                <option value="">请选择市</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="area" lay-filter="area" id="area">
                                <option value="">请选择县/区</option>
                            </select>
                        </div>
                        <div class="layui-input-inline"><a id="reset" class="layui-btn layui-btn-normal">重置</a></div>
                    </div>

                </form>
            </div>
        {% endif %}

        {% if extra == 'filter_student' %}
            <div>
                <form method="get" class="layui-form x-so">
                    <div class="layui-form-item" id="x-city">
                        <div class="layui-input-inline">
                            <select name="school" lay-filter="school" id="school">
                                <option value="">请选学校</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="grade" lay-filter="grade" id="grade">
                                <option value="">请选年级</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <select name="_class" lay-filter="_class" id="_class">
                                <option value="">请选择班级</option>
                            </select>
                        </div>
                        <div class="layui-input-inline">
                            <button class="layui-btn layui-btn-normal">搜索</button>
                        </div>
                    </div>
                </form>
            </div>
        {% endif %}

        {% table2 cl %}

        <div class="page">
            <nav class="pull-right">
                <ul class="pagination">
                    {{ cl.page|safe }}
                </ul>
            </nav>
        </div>

    </div>
{% endblock %}

{% block js %}
    {% if extra == 'filter_student' %}
        <script src="{% static 'student/js/student_filter.js' %}"></script>
        <script>
            $(document).ready(
                student_ops.init()
            );
        </script>
    {% endif %}

{% endblock %}